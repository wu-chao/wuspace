<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>AHPUT高校论坛首页</title>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
    <link type="text/css" rel="stylesheet" th:href="@{/resources/css/base.css}"/>
    <link type="text/css" rel="stylesheet" th:href="@{/resources/css/cares.css}"/>
    <link type="text/css" rel="stylesheet" th:href="@{/resources/css/paging.css}"/>
    <style>
    body {
		padding: 0px;
		margin: 0px;
		background: #F0F0F0;
		font-family: "微软雅黑";
		font-size: 12px;
	}

    </style>
  </head>
  <body>
  	<div id="all">
	 	<!-- header部分开始 -->
		<div id="header">
			<div id="logo">
				<a th:href="@{/posts/index}"><img th:src="@{/resources/images/logo.png}"/></a>
			</div>
			<div id="navigation">
				<ul>
					<li id="user" th:if="${session.loginUser != null}">
						<input id="user_id" type="hidden" th:attr="data-id = ${session.loginUser.id}"/>
						<a class="nickname" id="user_name" th:text="${session.loginUser.nickname}"></a>
						<ul id="user_list">
							<li>
								<a th:href="${#mvc.url('UC#show').arg(3, session.loginUser.id).build()}" target="_blank">个人中心</a></li>
							<li>
								<a th:href="${#mvc.url('UC#logout').arg(0, session.loginUser.id).build()}">退出</a></li>
						</ul>
					</li>
					<li th:if="${session.loginUser == null}">
						<a class="table" th:href="@{/users/login}">登录</a>
					</li>
					<li th:if="${session.loginUser != null}"><a class="table" th:href="${#mvc.url('UC#careUsers').arg(3, session.loginUser.id).build()}">关注的人</a></li>
					<li th:if="${session.loginUser != null}"><a class="table" th:href="${#mvc.url('UC#collects').arg(3, session.loginUser.id).build()}">我的收藏</a></li>
					<li th:if="${session.loginUser != null}"><a class="table" th:href="${#mvc.url('UC#posts').arg(3, session.loginUser.id).build()}">我的发帖</a></li>
					<li><a class="table" th:href="@{/posts/index}">首页</a></li>
				</ul>
			</div>
		</div>
		<!-- header部分结束 -->
		
		<form id="search" th:action="@{/users/search}" method="get">
			<input type="text" id="search_input" name="title" placeholder="请输入搜索内容"/>
			<input type="submit" id="search_icon" th:attr="style='background:url('+@{/images/search.png}+') no-repeat'" value=""/>
		</form>
		
		<!-- body部分开始 -->
		<div id="body" style="background:#fff;">
			<div id="content_wrap">
				<div id="user_container">
					<ul id="users">
						<li class="user" th:each="user : ${userPage}" th:if="${user != null and user.isAdmin != 1}">
							<div class="user_title">
								<img class="user_avatar" th:src="'/blog/resources/images/avatars/'+${user.avatar}"></img>
								<a th:utext="${user.nickname}" th:href="${#mvc.url('UC#show').arg(3, user.id).build()}">昵称</a>&nbsp;
								<a th:attr="data-id=${user.id}" class="cancel_care_btn" th:text="取消关注" onclick="cancelCareUser(this)">取消关注</a>
							</div>
							<div class="user_nr" th:utext="${user.description}"></div>
						</li>
					</ul>
				</div>
					
				<!-- 分页 -->
				<div id="paging" th:if="${totalPages >= 2}">
					<a th:href="${#mvc.url('UC#careUsers').arg(0, 0).arg(2, 0).arg(3, session.loginUser.id).build()}">首页</a>
					<a th:if="${curPage - 1 >= 0}" th:href="${#mvc.url('UC#careUsers').arg(0, firstPage).arg(1, curPage).arg(2, curPage - 1).arg(3, session.loginUser.id).build()}">上一页</a>
					<a class="no_hover" th:if="${curPage - 1 lt 0}">上一页</a>
					<a th:if="${firstPage le totalPages - 1}" th:attr="class = ${curPage == firstPage ? 'clicked' : ''}"
						th:href="${#mvc.url('UC#careUsers').arg(0, firstPage).arg(1, curPage).arg(2, firstPage).arg(3, session.loginUser.id).build()}" th:text="${firstPage + 1}">1</a>
					<a th:if="${firstPage + 1 le totalPages - 1}" th:attr="class = ${curPage == firstPage + 1 ? 'clicked' : ''}"
						th:href="${#mvc.url('UC#careUsers').arg(0, firstPage).arg(1, curPage).arg(2, firstPage + 1).arg(3, session.loginUser.id).build()}" th:text="${firstPage + 2}">2</a>
					<a th:if="${firstPage + 2 le totalPages - 1}" th:attr="class = ${curPage == firstPage + 2 ? 'clicked' : ''}"
						th:href="${#mvc.url('UC#careUsers').arg(0, firstPage).arg(1, curPage).arg(2, firstPage + 2).arg(3, session.loginUser.id).build()}" th:text="${firstPage + 3}">3</a>
					<a th:if="${firstPage + 3 le totalPages - 1}" th:attr="class = ${curPage == firstPage + 3  ? 'clicked' : ''}"
						th:href="${#mvc.url('UC#careUsers').arg(0, firstPage).arg(1, curPage).arg(2, firstPage + 3).arg(3, session.loginUser.id).build()}" th:text="${firstPage + 4}">4</a>
					<a th:if="${firstPage + 4 le totalPages - 1}" th:attr="class = ${curPage == firstPage + 4  ? 'clicked' : ''}"
						th:href="${#mvc.url('UC#careUsers').arg(0, firstPage).arg(1, curPage).arg(2, firstPage + 4).arg(3, session.loginUser.id).build()}" th:text="${firstPage + 5}">5</a>
					<a th:if="${curPage + 2 le totalPages}" th:href="${#mvc.url('UC#careUsers').arg(0, firstPage).arg(1, curPage).arg(2, curPage + 1).arg(3, session.loginUser.id).build()}">下一页</a>
					<a class="no_hover" th:if="${curPage + 2 > totalPages}">下一页</a>
					<a th:href="${#mvc.url('UC#careUsers').arg(0, totalPages - 6).arg(2, totalPages - 1).arg(3, session.loginUser.id).build()}">尾页</a>
					<a class="no_hover">共<span th:text="${totalPages}"></span>页</a>
				</div>
			</div>
			
			<div id="sidebar"></div>
		</div>
		<!-- body部分结束-->
		
		<!-- footer部分开始 -->
		<div id="footer">
			<p>Copyright &copy; 2016 by wuchao</p>
		</div>
		<!-- footer部分结束 -->
  	</div>
		
	<script type="text/javascript" th:src="@{/resources/js/jquery-1.11.1.min.js}"></script>
	<script type="text/javascript" th:src="@{/resources/js/user.js}"></script>
 	<script type="text/javascript">
	/*<![CDATA[*/
		$("#user").mouseover(function(){
			$("#user_list").show();
		}).mouseleave(function(){
			$("#user_list").hide();
		});
    	
	/*]]>*/
 	</script>
  </body>
</html>
