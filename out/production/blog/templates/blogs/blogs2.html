<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sd="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>Home</title>

    <!-- Bootstrap -->
    <link th:href="@{/bower_components/bootstrap/dist/css/bootstrap.css}" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="css/base.css" th:src="@{/css/base.css}">
    <link type="text/css" rel="stylesheet" href="css/blogs.css"/>
    <link type="text/css" rel="stylesheet" href="css/paging.css"/>
    <link type="text/css" rel="stylesheet" href="css/topic.css"/>
    <style>
        #module_notice {
            margin: 0px;
            padding: 2px 0px;
            list-style: none;
        }

        .module_nr {
            display: block;
            padding: 10px 0px;
            border-bottom: 1px solid #428BCA;
        }

        .module_nr_title {
            font-weight: 700;
            font-size: 18px;
            color: #222;
        }

        .module_nr_content {
            margin-top: 10px;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="row">
        <div class="row col-lg-4">
            <a class="btn col-lg-3" th:href="${#mvc.url('HC#home').build()}">
                <img th:src="@{/images/logo.png}"/></a>
            <div class="col-lg-8 btn btn-group-justify">
                <a class="btn" role="button" hre="#">新闻</a>
                <a class="btn" role="button" hre="#">音乐</a>
                <a class="btn" role="button" hre="#">图片</a>
                <a class="btn" role="button" hre="#">博客</a>
                <a class="btn" role="button" hre="#">插件</a>
            </div>
        </div>
        <div class="col-lg-2 pull-right">
            <a id="login" th:href="@{/users/login}">登录</a>/
            <a id="register" th:href="@{/users/register}">注册</a>
        </div>
        <div class="col-lg-6 pull-right">
            <form class="form-inline" th:action="@{/search}" method="get">
                <div class="form-group">
                    <input type="text" class="form-control" name="search" placeholder="搜索"/>
                    <button type="submit" class="btn btn-success">搜索</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="container">
    <!-- content_wrap部分开始 -->
    <div id="main_container">
        <div id="blog_container">
            <div id="blist_info">
                共有博客<span th:text="${totalBlogNum}"></span>篇
            </div>
            <ul id="blist">
                <li class="bitem" th:each="blog : ${blogs}" th:attr="data-id = ${blog.id}">
                    <div th:attr="class = ${(blog.image != null and !#strings.isEmpty(blog.image)) ? 'bcontent' : 'bcontent_only'}">
                        <h2 class="btitle"><a th:href="${#mvc.url('BC#show').arg(0, blog.id).build()}"
                                              th:utext="${#strings.length(blog.title) > 20 ? #strings.substring(blog.title, 0, 20) : blog.title}"></a>
                        </h2>
                        <div class="btxt"
                             th:utext="${#strings.length(blog.content) > 360 ? #strings.substring(blog.content, 0, 360)+'...' : blog.content}"></div>
                        <div class="btags" th:text="${#strings.length(blog.content)}">

                        </div>
                        <div class="binfo">
                            <i th:attr="style='background:url('+@{/images/blog_author.png}+') no-repeat'"></i>
                            <a class="bauthor" target="_blank"
                               th:href="${#mvc.url('UC#show').arg(3, blog.user.id).build()}"
                               th:utext="${blog.user.nickname}">作者</a>&nbsp;&nbsp;

                            <i th:attr="style='background:url('+@{/images/blog_time.png}+') no-repeat'"></i>
                            <span class="btime" th:text="${#dates.format(blog.createTime,'yyyy-MM-dd')}">发表时间</span>&nbsp;&nbsp;

                            <i th:attr="style='background:url('+@{/images/blog_view_times.png}+') no-repeat'"></i>
                            <span th:text="${blog.viewedTimes}">浏览次数</span>&nbsp;&nbsp;

                            <a th:if="${session.loginUser != null and session.loginUser.id == blog.user.id}"
                               th:attr="data-id=${blog.id}" onclick="deleteBlog(this)" th:text="删除">删除</a>

                            <a th:if="${session.loginUser != null and session.loginUser.id == blog.user.id}"
                               th:href="'/blog/blogs/'+${blog.id}+'/update'" th:text="编辑">编辑</a>
                        </div>

                    </div>
                    <div class="bimage" th:if="${blog.image != null and !#strings.isEmpty(blog.image)}">
                        <img style="width:220px; height:150px;" th:src="${blog.image}"/>
                    </div>
                    <div style="clear:both;"></div>
                </li>
            </ul>
        </div>

        <!-- 分页 -->
        <nav aria-label="Page navigation">
            <ul class="pagination" sd:pagination="full">
                <!-- Pagination created by SpringDataDialect, this content is just for mockup -->
                <li class="disabled"><a href="#" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li>
                <li class="active"><a href="#">1 <span class="sr-only">(current)</span></a></li>
            </ul>
        </nav>
    </div>
    <!-- content_wrap部分结束 -->

    <!-- sidebar部分开始 -->
    <div id="side_container">
        <!-- 话题分类部分开始 -->
        <div id="topics_container" class="sidebar_module">
            <h2 class="sidebar_module_theme">话题分类 </h2>
            <ul id="topics">
                <li th:each="topicType : ${topicTypes}" th:if="${topicType != null}">
                    <a class="topic" th:href="${#mvc.url('BC#topic').arg(3, topicType.key).build()}"
                       th:text="${topicType.value}"></a></li>
            </ul>
        </div>
        <!-- 话题分类部分结束 -->
    </div>
    <div style="clear:both;"></div>
    <!-- sidebar部分结束-->
</div>

<!-- footer部分开始 -->
<div id="footer">
    <p>Copyright &copy; 2016 by wuchao &nbsp;&nbsp;
        <span><a style="margin:20px 0px;color:#337ab7" th:href="@{/admins/adminLogin}">管理员登录入口</a></span></p>
</div>
<!-- footer部分结束 -->

<script type="text/javascript" th:src="@{/js/jquery-1.11.1.min.js}"></script>
<script type="text/javascript" th:src="@{/js/scrolltotop.js}"></script>
<script type="text/javascript" th:src="@{/js/blog.js}"></script>
<script type="text/javascript">
    /*<![CDATA[*/
    $("#user").mouseover(function () {
        $("#user_list").show();
    }).mouseleave(function () {
        $("#user_list").hide();
    });

    /*]]>*/
</script>
</body>
</html>
